<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IEC 949 Conductor Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <nav class="main-nav">
            <button class="nav-btn active" data-page="calculator">Calculator</button>
            <button class="nav-btn" data-page="analysis">Cable Analysis</button>
            <button class="nav-btn" data-page="constants">Reference Tables</button>
        </nav>
        
        <div id="calculator-page" class="page active">
            <header>
                <div class="header-brand-row">
                    <img src="C:\Users\Nehagowda\Downloads\bb.jpg" alt="Balfour Beatty logo" class="header-logo">
                </div>
                <div class="title-banner">
                    <h1>IEC 949 Conductor Calculator</h1>
                    <p class="subtitle">Adiabatic Current Calculation for Conductors</p>
                </div>
            </header>

            <div class="main-content">
            <div class="input-section">
                <h2>Conductor Input Parameters</h2>
                
                <div class="form-group">
                    <label for="voltage">Voltage (kV) *</label>
                    <input type="number" id="voltage" step="0.1" placeholder="Enter voltage in kV">
                </div>
                
                <div class="form-group">
                    <label for="conductorArea">Conductor Cross Section Area (mm²)</label>
                    <input type="number" id="conductorArea" step="0.01" placeholder="Enter conductor area in mm² (optional)">
                </div>

                <div class="form-group">
                    <label for="material">Conductor Material *</label>
                    <select id="material" class="dropdown">
                        <option value="">Select Material</option>
                        <option value="copper">Copper</option>
                        <option value="aluminium">Aluminium</option>
                        <option value="lead">Lead</option>
                        <option value="steel">Steel</option>
                        <option value="bronze">Bronze</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="betaValue">β Value (K) *</label>
                        <input type="text" id="betaValue" class="readonly-field" placeholder="Select a material to populate" readonly>
                    </div>

                    <div class="form-group half">
                        <label for="kValue">K Value (A·s<sup>1/2</sup>/mm²) *</label>
                        <input type="text" id="kValue" class="readonly-field" placeholder="Select a material to populate" readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label for="shortCircuitCurrent">Short Circuit Current (kA) *</label>
                    <input type="number" id="shortCircuitCurrent" step="0.01" placeholder="Enter short circuit current in kA">
                </div>

                <div class="form-group">
                    <label for="time">Time (sec) *</label>
                    <input type="number" id="time" step="0.01" placeholder="Enter time in seconds">
                </div>

                <div class="form-group">
                    <label for="initialTemp">Initial Temperature θi (°C)</label>
                    <input type="number" id="initialTemp" step="0.1" value="90" readonly>
                </div>

                <div class="form-group">
                    <label for="finalTemp">Final Temperature θf (°C)</label>
                    <input type="number" id="finalTemp" step="0.1" value="250" readonly>
                </div>

                <button id="calculateBtn" class="calculate-btn">Calculate</button>
            </div>

            <div class="output-section">
                <h2>Calculation Results</h2>
                <div id="results" class="results">
                    <p class="placeholder">Fill in the inputs and click Calculate to see results</p>
                </div>
                
            </div>
            </div>

            <!-- IEC 949 Adiabatic Temperature Rise Formula (shown after calculation) -->
            <section id="formulaSection" class="formula-section">
                <div class="formula-card">
                    <h2>IEC 949 Adiabatic Temperature Rise Formula</h2>
                    <p class="formula-intro">
                        The general form of the adiabatic temperature rise formula, applicable to any initial temperature, is:
                    </p>
                    <div class="formula-equation">
                        I<sub>AD</sub><sup>2</sup> · t = K<sup>2</sup> S<sup>2</sup> ln
                        <span class="fraction">
                            <span class="numerator">θ<sub>f</sub> + β</span>
                            <span class="denominator">θ<sub>i</sub> + β</span>
                        </span>
                    </div>
                    <div class="formula-definitions">
                        <ul>
                            <li><strong>I<sub>AD</sub></strong> – short-circuit current (r.m.s. over duration) calculated on an adiabatic basis (A)</li>
                            <li><strong>t</strong> – duration of short-circuit (s)</li>
                            <li><strong>K</strong> – constant depending on the material of the current-carrying component (A·s<sup>1/2</sup>/mm²)</li>
                            <li><strong>S</strong> – geometrical cross-sectional area of the current-carrying component (mm²)</li>
                            <li><strong>θ<sub>f</sub></strong> – final temperature (°C)</li>
                            <li><strong>θ<sub>i</sub></strong> – initial temperature (°C)</li>
                            <li><strong>β</strong> – reciprocal of the temperature coefficient of resistance of the current-carrying component at 0 °C (K)</li>
                            <li><strong>ln</strong> – natural logarithm (log<sub>e</sub>)</li>
                        </ul>
                        <ul>
                            <li><strong>σ<sub>c</sub></strong> – volumetric specific heat of the current-carrying component at 20 °C (J/K·m³)</li>
                            <li><strong>ρ<sub>20</sub></strong> – electrical resistivity of the current-carrying component at 20 °C (Ω·m)</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>

        <div id="analysis-page" class="page">
            <header>
                <h1>Cable Analysis</h1>
                <p class="subtitle">Detailed assessment & reporting</p>
            </header>

            <div class="analysis-content">
                <section class="analysis-panel">
                    <h2>Result Snapshot</h2>
                    <div id="analysisStatus" class="analysis-status">
                        <span class="status-label">No analysis yet</span>
                        <p>Run a calculation on the Calculator page to populate this view.</p>
                    </div>
                    <div id="analysisCards" class="analysis-grid">
                        <p class="placeholder">Cable metrics and adequacy summary will be shown here.</p>
                    </div>
                </section>

                <section class="analysis-panel">
                    <h2>Cable Selection Notes</h2>
                    <div id="cableSelectionText" class="analysis-notes">Run a calculation to generate the cable selection narrative.</div>
                    <div id="pdfButtonContainer" class="analysis-actions" style="display: none;">
                        <button id="downloadPdfBtn" class="pdf-btn">Download PDF Report</button>
                    </div>
                </section>
            </div>
        </div>
        
        <div id="constants-page" class="page">
            <header>
                <h1>Reference Tables</h1>
                <p class="subtitle">IEC 949 Standard Constants</p>
            </header>
            
            <div class="constants-section">
                <div class="tables-container">
                    <div class="table-wrapper">
                        <h3>Table I: Material Constants</h3>
                        <table id="materialConstantsTable" class="constants-table">
                            <thead>
                                <tr>
                                    <th>Material</th>
                                    <th>K</th>
                                    <th>β</th>
                                    <th>σ₁ (J/K·m³)</th>
                                    <th>ρ₂₀ (Ω·m)</th>
                                </tr>
                            </thead>
                            <tbody id="materialConstantsBody">
                            </tbody>
                        </table>
                    </div>

                    <div class="table-wrapper">
                        <h3>Table II: Thermal Constants of Media</h3>
                        <table id="thermalConstantsTable" class="constants-table">
                            <thead>
                                <tr>
                                    <th>Medium</th>
                                    <th>ρ (K·m/W)</th>
                                    <th>σ (J/K·m³)</th>
                                </tr>
                            </thead>
                            <tbody id="thermalConstantsBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.8.2/docx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="constants.js"></script>
    <script src="calculations.js"></script>
    <script src="app.js"></script>
    <script src="pdfExport.js"></script>
    <script src="wordExport.js"></script>
</body>
</html>

